# Shell基本语法
## 1.脚本第一行
脚本第一行可以规定解释器，语法是：<br>
```shell
#!/bin/bash
......
```
脚本的第一行告诉Linux系统，如果解释该文本中的内容，但必须放在第一行。<br>

## 2.注释
Shell脚本中的注释使用的是``#``,如下：<br>
```shell
#这是注释
#这是注释
#这是注释
#这是注释
```

## 3.变量
在shell中变量可以直接定义，不用管类型。在使用变量时需要用``$``修饰变量，意思是使用变量的值
```shell
Noble="surperman";
echo ${Noble};
```


## 4.bansh传递参数
在运行脚本的命令后面加上参数，类似如下：<br>
```shell
bash test.sh arg1 arg2
```

__特别参数符号使用__<br>
- ``$0`` 表示文件名
- ``$n`` 表示第n个参数
- ``$#`` 表示参数的个数
- ``$@`` 接受传递的所有参数，支持迭代器的使用方法
- ``$*`` 接受传递的所有参数，并将他们当做一个字符串，不支持迭代器的使用方法
- ``$$`` 获得当前执行脚本的进程号``PID``
- ``$!`` 获得上一个后台进程的``PID``，也就是当前的``PPID``
- ``$?`` 获取上一个命令的返回值，如果为0说明执行正确，非0表示执行错误。以前，在``make``编译完成源码后，我们会使用``echo $?``检查是否编译正确。
- $_ 获取在此之前执行的脚本或命令的最后一个参数。

## 5.字符串操作
- ``${string}`` 返回变量``string``的内容
- ``${#string}`` 返回变量``string``字符串的长度
- ``${string:offset}`` 在字符串变量``string``中，减去``offset``个字节 取后面的字符串。offset是int型
- ``${string:offset:length}`` 取``offse``t字节后面``length``个字节
- ``${string#word}`` 从变量``string`` *开头* 删除 **最短** 匹配的``word``子串
- ``${string##word}`` 从变量``string`` *开头* 删除 **最长** 匹配的``word``子串
- ``${string%word}`` 从变量``string`` *结尾* 删除 **最短** 匹配的``word``子串
- ``${string%%word}`` 从变量``string`` *结尾* 删除 **最长** 匹配的``word``子串
- ``${string/oldstr/newstr}`` 使用``newstr``替换第一个匹配的``oldstr``
- ``${string//oldstr/newstr}`` 使用``newstr``替换所有匹配的``oldstr``

### 特殊扩展规则说明
- ``${paramenter:-words}`` 如果``paramenter``变量的值为空(即未赋值)，则会返回``words``字符串值。(注意：``paramenter``是变量，而``words``是字符串)
- ``${paramenter:=words}`` 如果``paramenter``变量的值为空(即未赋值)，则会返回``words``字符串值，并用``words``赋值给``paramenter``。
- ``${paramenter:?words}`` 如果``paramenter``变量的值为空(即未赋值)，那么``bash``会输出错误提示字符串，提示字符串中包含``words``子串。
- ``${paramenter:+words}`` 如果``paramenter``变量的值为空(即未赋值)，什么都不做。否则``words``字符串替代``paramenter``变量的值。

一般常用的就是第一个，后三个用的不多。<br>

## 6.算数运算符
```shell
val=`expr 2 + 2`
echo "两数之和为 : $val"
两数之和为 : 4
```

- 表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。
- 完整的表达式要被 **\` `** 包含，注意这个字符不是常用的单引号，在 Esc 键下边。



|算数运算符|意义|
|---------|----|
| +、-  | 加法、减法  |
| *、/、%  | 乘法、除法、取余  |
| **  | 幂运算  |
| ++、--  | 增加、减少  |
| !、&&、ll  | 逻辑非、逻辑与、逻辑或  |
| <、<=、>、>=  | 比较符号  |
| ==、!=、=  | 等于、不等于、赋值  |
| <<、>>  | 左移位、右移位  |
| ~、l、&、^  | 按位取反、按位异或、按位与、按位或  |
| +=、-=、*=、\=、%=  | 同C语法  |


Shell中常见的算数运算命令<br>

|运算操作符与命令|意义|
|--------------|----|
| $[]  | 用于整数运算  |
| expr  | 可用于整数运算  |
| bc  | Linux下的一个计算程序  |



## 7.数组

**数组的定义：**<br>

```shell
[root@noble ~]# arr=(1 2 3 4 noble)
[root@noble ~]# echo ${arr[*]}
1 2 3 4 noble
```

**数组的读取：**<br>

```shell
#数组的常规读取方法
[root@noble ~]# ${arr[index]}
[root@noble ~]# ${arr[0]}
1
#读取数组元素个数
[root@noble ~]# echo ${#arr[*]}
5
```
