# 单一职责原理SRP
单一职责原理的英文是：Single Responsibility Principle
具体内容是：一个类或者一个模块只负责一个单一的功能。
看似简单易懂的原则，在实际运用时并不是很简单，我们需要判断一件事情：
- 1.``单一的功能``具体如何划分

试想如果我们能够划分具体的``单一职责``，那么模块的划分应该也是水到渠成的。那么单一职责原理的指导理论是：
<span style="color:red">我们能够通过具体的业务场景，判断一个模块是否满足单一职责。</span>

我们下面详细来看具体实例
## 01.单一的功能

### 1.1.极端情况下
一个业务有账户系统和订单系统，如果我们把账户系统和订单系统放在一个模块下，就明显违法了单一职责原理。因为我们很好判断账户系统和订单系统是不同的。

### 1.2.大多数情况
大多数情况下，判断一个模块是不是违背单一职责是比较困难的。看一个实际的实例：

在一个社交产品中，我们用下面的 UserInfo 类来记录用户的信息。UserInfo 类的设计是否满足单一职责原则呢？
```java
public class UserInfo {
  private long userId;
  private String username;
  private String email;
  private String telephone;
  private long createTime;
  private long lastLoginTime;
  private String avatarUrl;
  private String provinceOfAddress; // 省
  private String cityOfAddress; // 市
  private String regionOfAddress; // 区 
  private String detailedAddress; // 详细地址
  // ...省略其他属性和方法...
}
```

一般有两种不同的观点：
- 1.一种观点是，UserInfo 类包含的都是跟用户相关的信息，所有的属性和方法都隶属于用户这样一个业务模型，满足单一职责原则
- 2.另一种观点是，地址信息在 UserInfo 类中，所占的比重比较高，可以继续拆分成独立的 UserAddress 类，UserInfo 只保留除 Address 之外的其他信息，拆分之后的两个类的职责更加单一。

首先我们评价一下上面的两条观点：
- 1.第一种观点:在没有其他详细业务需求下，第一种观点是没有问题。
- 2.第二种观点:在没有其他详细业务需求下，第二种观点是没有意义的。将地址相关的几个字段拆分到其他模块并没有解决任何实际问题，因为本身就不存在任何问题。我们使用设计原理一定要灵活不能生搬硬套。

#### 1.2.1.新业务出现
如果现在有需求出现：随着业务发展我们新增派送商品给用户的业务，这个时候地址信息就有了新的职责。我们需要将地址信息从``UserInfo``中拆分出来形成一个新的模块。 **注意这里的区别点：** 
- 1.将地址信息拆分的推动力不是``UserInfo``本身的结构信息
- 2.而是业务需求赋予地址信息新的职责。这正是符合开头所说的单一职责原理的指导理论。

如果又新增了：需要进行账户权限管理。这时用户登陆认证的信息就需要继续拆分。

#### 1.2.2.结论
- 1.不同的应用场景、不同阶段的需求背景下，对同一个类的职责是否单一的判定，可能都是不一样的。
    - 1.1.在某种应用场景或者当下的需求背景下，一个类的设计可能已经满足单一职责原则了
    - 1.2.但如果换个应用场景或着在未来的某个需求背景下，可能就不满足了，需要继续拆分成粒度更细的类。
- 2.评价一个类的职责是否足够单一，我们并没有一个非常明确的、可以量化的标准，可以说，这是件非常主观、仁者见仁智者见智的事情。
- 3.实际上，在真正的软件开发中，我们也没必要过于未雨绸缪，过度设计。
- 4.我们可以先写一个粗粒度的类，满足业务需求。随着业务的发展，如果粗粒度的类越来越庞大，代码越来越多，这个时候，我们就可以将这个粗粒度的类，拆分成几个更细粒度的类。这就是所谓的持续重构