# http库
## 案例
### 1.请求体body只能读取一次
客户端发起的请求，body只能读取一般，读取第二次不会有错误，只会读到空值。
```go
func readBodyOnce(w http.ResponseWriter, r *http.Request) {
	body, err := io.ReadAll(r.Body)
	if err != nil {
		log.Infof(context.Background(), "第一次读取body失败, err: %+v", err)
		return
	}
	_, _ = fmt.Fprintf(w, "body is: %s \n", string(body))

	body, err = io.ReadAll(r.Body)
	if err != nil {
		log.Infof(context.Background(), "第二次读取body失败, err: %+v", err)
		return
	}
	_, _ = fmt.Fprintf(w, "body is: %s \n", string(body))
}

func main() {
	http.HandleFunc("/readBodyOnce", readBodyOnce)
	if err := http.ListenAndServe(":8080", nil); err != nil {
		panic(err)
	}
}
```
![fail](https://cdn.jsdelivr.net/gh/pitifulnoble/picture@master/805d9d105a529edb8ad83b2b3b98b1b7.png)